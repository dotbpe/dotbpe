// Generated by the protocol buffer compiler. DO NOT EDIT!
// source: math.proto

#region Designer generated code

using DotBPE.Protocol.Amp;
using DotBPE.Rpc;
using DotBPE.Rpc.Exceptions;
using Google.Protobuf;
using System.Threading.Tasks;

namespace MathCommon
{
    //start for class MathClient
    public sealed class MathClient : AmpInvokeClient
    {
        public MathClient(ICallInvoker<AmpMessage> callInvoker) : base(callInvoker)
        {
        }

        //同步方法
        public RpcResult<AddRes> Add(AddReq req)
        {
            AmpMessage message = AmpMessage.CreateRequestMessage(10005, 1);

            message.FriendlyServiceName = "Math.Add";

            message.Data = req.ToByteArray();
            var response = base.CallInvoker.BlockingCall(message);
            if (response == null)
            {
                throw new RpcException("error,response is null !");
            }
            var result = new RpcResult<AddRes>();
            if (response.Code != 0)
            {
                result.Code = response.Code;
            }

            if (response.Data == null)
            {
                result.Data = new AddRes();
            }
            else
            {
                result.Data = AddRes.Parser.ParseFrom(response.Data);
            }

            return result;
        }

        public async Task<RpcResult<AddRes>> AddAsync(AddReq req, int timeOut = 3000)
        {
            AmpMessage message = AmpMessage.CreateRequestMessage(10005, 1);
            message.FriendlyServiceName = "Math.Add";
            message.Data = req.ToByteArray();
            var response = await base.CallInvoker.AsyncCall(message, timeOut);
            if (response == null)
            {
                throw new RpcException("error,response is null !");
            }
            var result = new RpcResult<AddRes>();
            if (response.Code != 0)
            {
                result.Code = response.Code;
            }

            if (response.Data == null)
            {
                result.Data = new AddRes();
            }
            else
            {
                result.Data = AddRes.Parser.ParseFrom(response.Data);
            }

            return result;
        }
    }

    //end for class MathClient
}

#endregion Designer generated code
